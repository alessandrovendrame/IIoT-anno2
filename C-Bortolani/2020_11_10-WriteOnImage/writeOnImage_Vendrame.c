#include <stdio.h>
#include <stdlib.h>
#include "qdbmp.h"
#include <ctype.h>
/* run this program using the console pauser or add your own getch, system("pause") or input loop */

int getLetter(char let);

int main() {
	//Dichiarazione variabili
	//
    char scritta[50];
    BMP *bmp;
    int x,y,i=0;
    int lettera;
    int xMove = 10;

	//Costruzione del database di lettere
	//
	char lettere[21][7][5] = {
		//A
		{{'0', '1', '1', '1', '0'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '1', '1', '1', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'}},
		//B
		{{'1', '1', '1', '1', '0'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '1', '1', '1', '0'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '1', '1', '1', '0'}},
		//C
		{{'0', '1', '1', '1', '0'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '0'},{'1', '0', '0', '0', '0'},{'1', '0', '0', '0', '0'},{'1', '0', '0', '0', '1'},{'0', '1', '1', '1', '0'}},
		//D
		{{'1', '1', '1', '0', '0'},{'1', '0', '0', '1', '0'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '1', '0'},{'1', '1', '1', '0', '0'}},
		//E
		{{'1', '1', '1', '1', '1'},{'1', '0', '0', '0', '0'},{'1', '0', '0', '0', '0'},{'1', '1', '1', '1', '0'},{'1', '0', '0', '0', '0'},{'1', '0', '0', '0', '0'},{'1', '1', '1', '1', '1'}},
		//F
		{{'1', '1', '1', '1', '1'},{'1', '0', '0', '0', '0'},{'1', '0', '0', '0', '0'},{'1', '1', '1', '1', '0'},{'1', '0', '0', '0', '0'},{'1', '0', '0', '0', '0'},{'1', '0', '0', '0', '0'}},
		//G
		{{'0', '1', '1', '1', '0'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '0'},{'1', '0', '1', '1', '0'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'0', '1', '1', '1', '0'}},
		//H
		{{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '1', '1', '1', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'}},
		//I
		{{'1', '1', '1', '1', '1'},{'0', '0', '1', '0', '0'},{'0', '0', '1', '0', '0'},{'0', '0', '1', '0', '0'},{'0', '0', '1', '0', '0'},{'0', '0', '1', '0', '0'},{'1', '1', '1', '1', '1'}},
		//L
		{{'1', '0', '0', '0', '0'},{'1', '0', '0', '0', '0'},{'1', '0', '0', '0', '0'},{'1', '0', '0', '0', '0'},{'1', '0', '0', '0', '0'},{'1', '0', '0', '0', '0'},{'1', '1', '1', '1', '1'}},
		//M
		{{'1', '0', '0', '0', '1'},{'1', '1', '0', '1', '1'},{'1', '0', '1', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'}},
		//N
		{{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '1', '0', '0', '1'},{'1', '0', '1', '0', '1'},{'1', '0', '0', '1', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'}},
		//O 
		{{'0', '1', '1', '1', '0'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'0', '1', '1', '1', '0'}},
		//P
		{{'0', '1', '1', '1', '0'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '1', '1', '1', '0'},{'1', '0', '0', '0', '0'},{'1', '0', '0', '0', '0'},{'1', '0', '0', '0', '0'}},
		//Q
		{{'0', '1', '1', '1', '0'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '1', '0', '1'},{'1', '0', '0', '1', '0'},{'0', '1', '1', '0', '1'}},
		//R
		{{'1', '1', '1', '1', '0'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '1', '1', '1', '0'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'}},
		//S
		{{'0', '1', '1', '1', '1'},{'1', '0', '0', '0', '0'},{'1', '0', '0', '0', '0'},{'0', '1', '1', '1', '0'},{'0', '0', '0', '0', '1'},{'0', '0', '0', '0', '1'},{'1', '1', '1', '1', '0'}},
		//T
		{{'1', '1', '1', '1', '1'},{'0', '0', '1', '0', '0'},{'0', '0', '1', '0', '0'},{'0', '0', '1', '0', '0'},{'0', '0', '1', '0', '0'},{'0', '0', '1', '0', '0'},{'0', '0', '1', '0', '0'}},
		//U
		{{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'0', '1', '1', '1', '0'}},
		//V
		{{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'1', '0', '0', '0', '1'},{'0', '1', '0', '1', '0'},{'0', '0', '1', '0', '0'}},
		//Z
		{{'1', '1', '1', '1', '1'},{'1', '0', '0', '0', '1'},{'0', '0', '0', '1', '0'},{'0', '0', '1', '0', '0'},{'0', '1', '0', '0', '0'},{'1', '0', '0', '0', '1'},{'1', '1', '1', '1', '1'}}
	};
	
	//Richiesta della scritta da inserire nell'immagine
	//
	printf("Inserisci la scritta da inserire nell'immagine: ");
	gets(scritta);
	
    bmp = BMP_Create( 500, 300, 24 );
    
    //Finchè la stringa non è finita il ciclo continua a scorrere le lettere
    //
    while(scritta[i] != '\0'){
    	
    	lettera = getLetter(toupper(scritta[i]));
    	
		if(lettera != -1){ //Controllo se il cararattere letto è uno spazio, in caso contrario scrivo la lettera
			for(x = 0; x < 5; x++){
            	for(y = 0; y < 7; y++){
                	if(lettere[lettera][y][x] == '1'){
                    	BMP_SetPixelRGB(bmp, xMove, y + 10, 255, 255, 255);
                	}
           		}
            	xMove++;
        	}
        	xMove+=2;
		}else
		{
			xMove+=5;
		}
		i++;    		
	}
	
    BMP_WriteFile( bmp, "stampaNome.bmp" ); //salvo il file 
    BMP_Free( bmp );						//Libero la memoria
    return 0;
}


//Funzione che data una lettera restituisce la posizione nel vettore
//
int getLetter(char let){
    int pos = 0;
    switch(let){
        case 'A': 
            pos = 0;
            break;
        case 'B': 
            pos = 1;
            break;
        case 'C': 
            pos = 2;
            break;
        case 'D': 
            pos = 3;
            break;
        case 'E': 
            pos = 4;
            break;
        case 'F': 
            pos = 5;
            break;
        case 'G': 
            pos = 6;
            break;
        case 'H': 
            pos = 7;
            break;
        case 'I': 
            pos = 8;
            break;
        case 'L': 
            pos = 9;
            break;
        case 'M': 
            pos = 10;
            break;
        case 'N': 
            pos = 11;
            break;
        case 'O': 
            pos = 12;
            break;
        case 'P': 
            pos = 13;
            break;
        case 'Q': 
            pos = 14;
            break;
        case 'R': 
            pos = 15;
            break;
        case 'S': 
            pos = 16;
            break;
        case 'T': 
            pos = 17;
            break;
        case 'U': 
            pos = 18;
            break;
        case 'V': 
            pos = 19;
            break;
        case 'Z': 
            pos = 20;
            break;
        case ' ':
        	pos = -1;
        	break;
    }
    return pos;
}
